"use strict";(self.webpackChunkbee_js_docs=self.webpackChunkbee_js_docs||[]).push([[973],{8453:(e,n,o)=>{o.d(n,{R:()=>r,x:()=>c});var a=o(6540);const t={},s=a.createContext(t);function r(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),a.createElement(s.Provider,{value:n},e.children)}},8748:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>i,contentTitle:()=>c,default:()=>d,frontMatter:()=>r,metadata:()=>a,toc:()=>h});const a=JSON.parse('{"id":"documentation/chequebook","title":"Chequebook Management","description":"On Swarm, when downloading data from the network, nodes pay each other for forwarding data in the form of cheques. If you will be downloading a significant amount of data from the network, it is important that you fund your chequebook with BZZ so your node can issue and then pay for cheques.","source":"@site/docs/documentation/chequebook.md","sourceDirName":"documentation","slug":"/chequebook","permalink":"/docs/chequebook","draft":false,"unlisted":false,"editUrl":"https://github.com/ethersphere/bee-js-docs/docs/documentation/chequebook.md","tags":[],"version":"current","frontMatter":{"title":"Chequebook Management","id":"chequebook","slug":"/chequebook","sidebar_label":"Chequebook Management"},"sidebar":"Balls","previous":{"title":"Checking Node Status","permalink":"/docs/status"},"next":{"title":"Buying Storage","permalink":"/docs/storage"}}');var t=o(4848),s=o(8453);const r={title:"Chequebook Management",id:"chequebook",slug:"/chequebook",sidebar_label:"Chequebook Management"},c=void 0,i={},h=[{value:"Requirements",id:"requirements",level:3},{value:"1. Deposit to Chequebook from Node Wallet",id:"1-deposit-to-chequebook-from-node-wallet",level:3},{value:"2. Get Chequebook Balance",id:"2-get-chequebook-balance",level:3},{value:"3. Withdraw from Chequebook to Node Wallet",id:"3-withdraw-from-chequebook-to-node-wallet",level:3},{value:"4. Get Cheques",id:"4-get-cheques",level:3},{value:"Get Last Cheques for All Peers",id:"get-last-cheques-for-all-peers",level:4},{value:"Get Cheques for a Specific Peer",id:"get-cheques-for-a-specific-peer",level:4},{value:"5. Cash-out Cheque",id:"5-cash-out-cheque",level:3},{value:"Cashout the Last Cheque",id:"cashout-the-last-cheque",level:4}];function l(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"On Swarm, when downloading data from the network, nodes pay each other for forwarding data in the form of cheques. If you will be downloading a significant amount of data from the network, it is important that you fund your chequebook with BZZ so your node can issue and then pay for cheques."}),"\n",(0,t.jsx)(n.p,{children:"You can also fund your chequebook by running a full node and getting paid in BZZ for forwarding chunks to other nodes, however this may not be enough depending on your download volume."}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsx)(n.p,{children:"If using your node for downloads, it's recommended to actively monitor your node's chequebook balance and top it up once the balance begins to run low."})}),"\n",(0,t.jsx)(n.h3,{id:"requirements",children:"Requirements"}),"\n",(0,t.jsx)(n.p,{children:"To use the example scripts below, you need:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["An instance of ",(0,t.jsx)(n.code,{children:"bee-js"}),"'s ",(0,t.jsx)(n.code,{children:"Bee"})," ",(0,t.jsx)(n.a,{href:"/docs/getting-started/",children:"initialized"})," using the API endpoint of a currently operating ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"FULL"})})," Bee node."]}),"\n",(0,t.jsx)(n.li,{children:"Some BZZ to fund your chequebook."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"1-deposit-to-chequebook-from-node-wallet",children:"1. Deposit to Chequebook from Node Wallet"}),"\n",(0,t.jsx)(n.p,{children:"Deposits a specified amount of BZZ into the chequebook from your node wallet. This ensures that your node can issue cheques for transactions."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const amount = new BZZ.fromDecimalString('1') // Deposit 1 BZZ\n\nconst transactionHash = await bee.depositTokens(amount)\nconsole.log('Deposit transaction hash:', transactionHash.toHex())\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"Deposit transaction hash: 85362b9d3ed2ba520b12e4e6523546832064365621ece8b3881cd1dfd40365ec\n"})}),"\n",(0,t.jsx)(n.h3,{id:"2-get-chequebook-balance",children:"2. Get Chequebook Balance"}),"\n",(0,t.jsx)(n.p,{children:"Retrieves the current balance of the chequebook. This helps you ensure that you have enough BZZ to continue issuing cheques."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const chequebookBalance = await bee.getChequebookBalance()\nconsole.log('Chequebook Balance:', chequebookBalance)\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"Chequebook Balance: {\n  availableBalance: BZZ { state: FixedPointNumber { value: 10000000000000000n, scale: 16 } },\n  totalBalance: BZZ { state: FixedPointNumber { value: 10000000000000000n, scale: 16 } }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"3-withdraw-from-chequebook-to-node-wallet",children:"3. Withdraw from Chequebook to Node Wallet"}),"\n",(0,t.jsx)(n.p,{children:"Withdraws a specified amount of BZZ from the chequebook to the node wallet. You may need to withdraw if you want to transfer BZZ to another account or for other uses."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const amountToWithdraw = new BZZ.fromDecimalString('1') // Withdraw 1 BZZ\n\nconst withdrawalHash = await bee.withdrawTokens(amountToWithdraw)\nconsole.log('Withdraw transaction hash:', withdrawalHash.toHex())\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"Withdraw transaction hash: 7674b1070406f60c317d26d5155521d674e5494db8f90cabbf46de0e22fc5556\n"})}),"\n",(0,t.jsx)(n.h3,{id:"4-get-cheques",children:"4. Get Cheques"}),"\n",(0,t.jsx)(n.p,{children:"Retrieves information about the last sent and received cheques from peers, either for all peers or for a specific peer."}),"\n",(0,t.jsx)(n.h4,{id:"get-last-cheques-for-all-peers",children:"Get Last Cheques for All Peers"}),"\n",(0,t.jsx)(n.p,{children:"This method retrieves the most recent cheques sent or received for all peers. Each entry includes details like the recipient, chequebook address, and payout amount."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const lastCheques = await bee.getLastCheques()\nconsole.log('Last Cheques for all peers:', lastCheques)\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"Last Cheques for all peers: {\n  lastcheques: [\n    {\n      peer: '10f68a7f7fe8b85e04ae0c869c02852f1b568b145c7f59179feef0601d9f1bf7',\n      lastreceived: null,\n      lastsent: {\n        beneficiary: [EthAddress],\n        chequebook: [EthAddress],\n        payout: [BZZ]\n      }\n    },\n    ...\n  ]\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"get-cheques-for-a-specific-peer",children:"Get Cheques for a Specific Peer"}),"\n",(0,t.jsx)(n.p,{children:"Fetches the last cheques for a particular peer. This can help you track your cheques for specific interactions."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const peerAddress = '10f68a7f7fe8b85e04ae0c869c02852f1b568b145c7f59179feef0601d9f1bf7' \nconst lastChequesForPeer = await bee.getLastChequesForPeer(peerAddress)\nconsole.log(`Last cheques for peer ${peerAddress}:`, lastChequesForPeer)\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"Last cheques for peer 10f68a7f7fe8b85e04ae0c869c02852f1b568b145c7f59179feef0601d9f1bf7: {\n  peer: '10f68a7f7fe8b85e04ae0c869c02852f1b568b145c7f59179feef0601d9f1bf7',\n  lastreceived: null,\n  lastsent: {\n    beneficiary: EthAddress { bytes: [Uint8Array], length: 20 },\n    chequebook: EthAddress { bytes: [Uint8Array], length: 20 },\n    payout: BZZ { state: [FixedPointNumber] }\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"5-cash-out-cheque",children:"5. Cash-out Cheque"}),"\n",(0,t.jsx)(n.p,{children:"Cash out a cheque for a specific peer. This method allows you to retrieve funds from a cheque that has been issued to you by a peer."}),"\n",(0,t.jsx)(n.h4,{id:"cashout-the-last-cheque",children:"Cashout the Last Cheque"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const peerAddress = '10f68a7f7fe8b85e04ae0c869c02852f1b568b145c7f59179feef0601d9f1bf7' \n\nconst transactionId = await bee.cashoutLastCheque(peerAddress)\nconsole.log('Cashout transaction ID:', transactionId)\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"Cashout transaction ID: dabb1d1b129d4c6317b96db23d9ca2d417aec9961f9a4d52f6b24e165b525eb8\n"})})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}}}]);