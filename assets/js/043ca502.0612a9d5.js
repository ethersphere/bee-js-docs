"use strict";(self.webpackChunkbee_js_docs=self.webpackChunkbee_js_docs||[]).push([[973],{5680:(e,t,a)=>{a.d(t,{xA:()=>i,yg:()=>f});var o=a(6540);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,o,n=function(e,t){if(null==e)return{};var a,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var c=o.createContext({}),u=function(e){var t=o.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},i=function(e){var t=u(e.components);return o.createElement(c.Provider,{value:t},e.children)},h="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,c=e.parentName,i=l(e,["components","mdxType","originalType","parentName"]),h=u(a),p=n,f=h["".concat(c,".").concat(p)]||h[p]||d[p]||r;return a?o.createElement(f,s(s({ref:t},i),{},{components:a})):o.createElement(f,s({ref:t},i))}));function f(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,s=new Array(r);s[0]=p;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[h]="string"==typeof e?e:n,s[1]=l;for(var u=2;u<r;u++)s[u]=a[u];return o.createElement.apply(null,s)}return o.createElement.apply(null,a)}p.displayName="MDXCreateElement"},9933:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>u});var o=a(8168),n=(a(6540),a(5680));const r={title:"Chequebook Management",id:"chequebook",slug:"/chequebook",sidebar_label:"Chequebook Management"},s=void 0,l={unversionedId:"documentation/chequebook",id:"documentation/chequebook",title:"Chequebook Management",description:"On Swarm, when downloading data from the network, nodes pay each other for forwarding data in the form of cheques. If you will be downloading a significant amount of data from the network, it is important that you fund your chequebook with BZZ so your node can issue and then pay for cheques.",source:"@site/docs/documentation/chequebook.md",sourceDirName:"documentation",slug:"/chequebook",permalink:"/docs/chequebook",draft:!1,editUrl:"https://github.com/ethersphere/bee-js-docs/docs/documentation/chequebook.md",tags:[],version:"current",frontMatter:{title:"Chequebook Management",id:"chequebook",slug:"/chequebook",sidebar_label:"Chequebook Management"},sidebar:"Balls",previous:{title:"Checking Node Status",permalink:"/docs/status"},next:{title:"Buying Storage",permalink:"/docs/storage"}},c={},u=[{value:"Requirements",id:"requirements",level:3},{value:"1. Deposit to Chequebook from Node Wallet",id:"1-deposit-to-chequebook-from-node-wallet",level:3},{value:"2. Get Chequebook Balance",id:"2-get-chequebook-balance",level:3},{value:"3. Withdraw from Chequebook to Node Wallet",id:"3-withdraw-from-chequebook-to-node-wallet",level:3},{value:"4. Get Cheques",id:"4-get-cheques",level:3},{value:"Get Last Cheques for All Peers",id:"get-last-cheques-for-all-peers",level:4},{value:"Get Cheques for a Specific Peer",id:"get-cheques-for-a-specific-peer",level:4},{value:"5. Cash-out Cheque",id:"5-cash-out-cheque",level:3},{value:"Cashout the Last Cheque",id:"cashout-the-last-cheque",level:4}],i={toc:u},h="wrapper";function d(e){let{components:t,...a}=e;return(0,n.yg)(h,(0,o.A)({},i,a,{components:t,mdxType:"MDXLayout"}),(0,n.yg)("p",null,"On Swarm, when downloading data from the network, nodes pay each other for forwarding data in the form of cheques. If you will be downloading a significant amount of data from the network, it is important that you fund your chequebook with BZZ so your node can issue and then pay for cheques. "),(0,n.yg)("p",null,"You can also fund your chequebook by running a full node and getting paid in BZZ for forwarding chunks to other nodes, however this may not be enough depending on your download volume. "),(0,n.yg)("admonition",{type:"tip"},(0,n.yg)("p",{parentName:"admonition"},"If using your node for downloads, it's recommended to actively monitor your node's chequebook balance and top it up once the balance begins to run low.")),(0,n.yg)("h3",{id:"requirements"},"Requirements"),(0,n.yg)("p",null,"To use the example scripts below, you need:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"An instance of ",(0,n.yg)("inlineCode",{parentName:"li"},"bee-js"),"'s ",(0,n.yg)("inlineCode",{parentName:"li"},"Bee")," ",(0,n.yg)("a",{parentName:"li",href:"/docs/getting-started/"},"initialized")," using the API endpoint of a currently operating ",(0,n.yg)("strong",{parentName:"li"},(0,n.yg)("em",{parentName:"strong"},"FULL"))," Bee node."),(0,n.yg)("li",{parentName:"ul"},"Some BZZ to fund your chequebook.")),(0,n.yg)("h3",{id:"1-deposit-to-chequebook-from-node-wallet"},"1. Deposit to Chequebook from Node Wallet"),(0,n.yg)("p",null,"Deposits a specified amount of BZZ into the chequebook from your node wallet. This ensures that your node can issue cheques for transactions."),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-javascript"},"const amount = new BZZ.fromDecimalString('1') // Deposit 1 BZZ\n\nconst transactionHash = await bee.depositTokens(amount)\nconsole.log('Deposit transaction hash:', transactionHash.toHex())\n")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-bash"},"Deposit transaction hash: 85362b9d3ed2ba520b12e4e6523546832064365621ece8b3881cd1dfd40365ec\n")),(0,n.yg)("h3",{id:"2-get-chequebook-balance"},"2. Get Chequebook Balance"),(0,n.yg)("p",null,"Retrieves the current balance of the chequebook. This helps you ensure that you have enough BZZ to continue issuing cheques."),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-javascript"},"const chequebookBalance = await bee.getChequebookBalance()\nconsole.log('Chequebook Balance:', chequebookBalance)\n")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-bash"},"Chequebook Balance: {\n  availableBalance: BZZ { state: FixedPointNumber { value: 10000000000000000n, scale: 16 } },\n  totalBalance: BZZ { state: FixedPointNumber { value: 10000000000000000n, scale: 16 } }\n}\n")),(0,n.yg)("h3",{id:"3-withdraw-from-chequebook-to-node-wallet"},"3. Withdraw from Chequebook to Node Wallet"),(0,n.yg)("p",null,"Withdraws a specified amount of BZZ from the chequebook to the node wallet. You may need to withdraw if you want to transfer BZZ to another account or for other uses."),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-javascript"},"const amountToWithdraw = new BZZ.fromDecimalString('1') // Withdraw 1 BZZ\n\nconst withdrawalHash = await bee.withdrawTokens(amountToWithdraw)\nconsole.log('Withdraw transaction hash:', withdrawalHash.toHex())\n")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-bash"},"Withdraw transaction hash: 7674b1070406f60c317d26d5155521d674e5494db8f90cabbf46de0e22fc5556\n")),(0,n.yg)("h3",{id:"4-get-cheques"},"4. Get Cheques"),(0,n.yg)("p",null,"Retrieves information about the last sent and received cheques from peers, either for all peers or for a specific peer."),(0,n.yg)("h4",{id:"get-last-cheques-for-all-peers"},"Get Last Cheques for All Peers"),(0,n.yg)("p",null,"This method retrieves the most recent cheques sent or received for all peers. Each entry includes details like the recipient, chequebook address, and payout amount."),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-javascript"},"const lastCheques = await bee.getLastCheques()\nconsole.log('Last Cheques for all peers:', lastCheques)\n")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-bash"},"Last Cheques for all peers: {\n  lastcheques: [\n    {\n      peer: '10f68a7f7fe8b85e04ae0c869c02852f1b568b145c7f59179feef0601d9f1bf7',\n      lastreceived: null,\n      lastsent: {\n        beneficiary: [EthAddress],\n        chequebook: [EthAddress],\n        payout: [BZZ]\n      }\n    },\n    ...\n  ]\n}\n")),(0,n.yg)("h4",{id:"get-cheques-for-a-specific-peer"},"Get Cheques for a Specific Peer"),(0,n.yg)("p",null,"Fetches the last cheques for a particular peer. This can help you track your cheques for specific interactions."),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-javascript"},"const peerAddress = '10f68a7f7fe8b85e04ae0c869c02852f1b568b145c7f59179feef0601d9f1bf7' \nconst lastChequesForPeer = await bee.getLastChequesForPeer(peerAddress)\nconsole.log(`Last cheques for peer ${peerAddress}:`, lastChequesForPeer)\n")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-bash"},"Last cheques for peer 10f68a7f7fe8b85e04ae0c869c02852f1b568b145c7f59179feef0601d9f1bf7: {\n  peer: '10f68a7f7fe8b85e04ae0c869c02852f1b568b145c7f59179feef0601d9f1bf7',\n  lastreceived: null,\n  lastsent: {\n    beneficiary: EthAddress { bytes: [Uint8Array], length: 20 },\n    chequebook: EthAddress { bytes: [Uint8Array], length: 20 },\n    payout: BZZ { state: [FixedPointNumber] }\n  }\n}\n")),(0,n.yg)("h3",{id:"5-cash-out-cheque"},"5. Cash-out Cheque"),(0,n.yg)("p",null,"Cash out a cheque for a specific peer. This method allows you to retrieve funds from a cheque that has been issued to you by a peer."),(0,n.yg)("h4",{id:"cashout-the-last-cheque"},"Cashout the Last Cheque"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-javascript"},"const peerAddress = '10f68a7f7fe8b85e04ae0c869c02852f1b568b145c7f59179feef0601d9f1bf7' \n\nconst transactionId = await bee.cashoutLastCheque(peerAddress)\nconsole.log('Cashout transaction ID:', transactionId)\n")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-bash"},"Cashout transaction ID: dabb1d1b129d4c6317b96db23d9ca2d417aec9961f9a4d52f6b24e165b525eb8\n")))}d.isMDXComponent=!0}}]);