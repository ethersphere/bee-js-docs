"use strict";(self.webpackChunkbee_js_docs=self.webpackChunkbee_js_docs||[]).push([[5068],{3905:function(e,t,a){a.d(t,{Zo:function(){return c},kt:function(){return f}});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var d=n.createContext({}),s=function(e){var t=n.useContext(d),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},c=function(e){var t=s(e.components);return n.createElement(d.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,d=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),p=s(a),f=o,m=p["".concat(d,".").concat(f)]||p[f]||u[f]||r;return a?n.createElement(m,l(l({ref:t},c),{},{components:a})):n.createElement(m,l({ref:t},c))}));function f(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,l=new Array(r);l[0]=p;var i={};for(var d in t)hasOwnProperty.call(t,d)&&(i[d]=t[d]);i.originalType=e,i.mdxType="string"==typeof e?e:o,l[1]=i;for(var s=2;s<r;s++)l[s]=a[s];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}p.displayName="MDXCreateElement"},8215:function(e,t,a){var n=a(7294);t.Z=function(e){var t=e.children,a=e.hidden,o=e.className;return n.createElement("div",{role:"tabpanel",hidden:a,className:o},t)}},9877:function(e,t,a){a.d(t,{Z:function(){return c}});var n=a(7462),o=a(7294),r=a(2389),l=a(9548),i=a(6010),d="tabItem_LplD";function s(e){var t,a,r,s=e.lazy,c=e.block,u=e.defaultValue,p=e.values,f=e.groupId,m=e.className,h=o.Children.map(e.children,(function(e){if((0,o.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),v=null!=p?p:h.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),w=(0,l.lx)(v,(function(e,t){return e.value===t.value}));if(w.length>0)throw new Error('Docusaurus error: Duplicate values "'+w.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var g=null===u?u:null!=(t=null!=u?u:null==(a=h.find((function(e){return e.props.default})))?void 0:a.props.value)?t:null==(r=h[0])?void 0:r.props.value;if(null!==g&&!v.some((function(e){return e.value===g})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+g+'" but none of its children has the corresponding value. Available values are: '+v.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var b=(0,l.UB)(),y=b.tabGroupChoices,k=b.setTabGroupChoices,N=(0,o.useState)(g),x=N[0],F=N[1],D=[],B=(0,l.o5)().blockElementScrollPositionUntilNextRender;if(null!=f){var C=y[f];null!=C&&C!==x&&v.some((function(e){return e.value===C}))&&F(C)}var j=function(e){var t=e.currentTarget,a=D.indexOf(t),n=v[a].value;n!==x&&(B(t),F(n),null!=f&&k(f,n))},O=function(e){var t,a=null;switch(e.key){case"ArrowRight":var n=D.indexOf(e.currentTarget)+1;a=D[n]||D[0];break;case"ArrowLeft":var o=D.indexOf(e.currentTarget)-1;a=D[o]||D[D.length-1]}null==(t=a)||t.focus()};return o.createElement("div",{className:"tabs-container"},o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":c},m)},v.map((function(e){var t=e.value,a=e.label,r=e.attributes;return o.createElement("li",(0,n.Z)({role:"tab",tabIndex:x===t?0:-1,"aria-selected":x===t,key:t,ref:function(e){return D.push(e)},onKeyDown:O,onFocus:j,onClick:j},r,{className:(0,i.Z)("tabs__item",d,null==r?void 0:r.className,{"tabs__item--active":x===t})}),null!=a?a:t)}))),s?(0,o.cloneElement)(h.filter((function(e){return e.props.value===x}))[0],{className:"margin-vert--md"}):o.createElement("div",{className:"margin-vert--md"},h.map((function(e,t){return(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==x})}))))}function c(e){var t=(0,r.Z)();return o.createElement(s,(0,n.Z)({key:String(t)},e))}},3339:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return i},contentTitle:function(){return d},metadata:function(){return s},toc:function(){return c},default:function(){return p}});var n=a(7462),o=a(3366),r=(a(7294),a(3905)),l=(a(9877),a(8215),["components"]),i={title:"Upload and Download",hide_title:!0,id:"upload-download",slug:"/upload-download",sidebar_label:"Upload and Download"},d=void 0,s={unversionedId:"user-documentation/upload-download",id:"user-documentation/upload-download",title:"Upload and Download",description:"Upload and Download",source:"@site/docs/user-documentation/upload-download.md",sourceDirName:"user-documentation",slug:"/upload-download",permalink:"/docs/upload-download",editUrl:"https://github.com/ethersphere/bee-js-docs",tags:[],version:"current",frontMatter:{title:"Upload and Download",hide_title:!0,id:"upload-download",slug:"/upload-download",sidebar_label:"Upload and Download"},sidebar:"Balls",previous:{title:"Getting Started",permalink:"/docs/getting-started"},next:{title:"Track Upload",permalink:"/docs/track-upload"}},c=[{value:"Upload and Download",id:"upload-and-download",children:[{value:"Data",id:"data",children:[],level:3},{value:"Single file",id:"single-file",children:[],level:3},{value:"Files and Directories",id:"files-and-directories",children:[],level:3}],level:2},{value:"Retrieve file from node or gateway",id:"retrieve-file-from-node-or-gateway",children:[],level:2}],u={toc:c};function p(e){var t=e.components,a=(0,o.Z)(e,l);return(0,r.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"upload-and-download"},"Upload and Download"),(0,r.kt)("p",null,"Uploading your data to Swarm is easy with ",(0,r.kt)("inlineCode",{parentName:"p"},"bee-js"),". Based on your needs you can either upload directly unstructured data, single file or even complex directories. Let's walk through the options one by one."),(0,r.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"Postage stamps")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Uploading to Swarm network require to have Postage stamps for every write operation.\nTo understand better what does it mean see ",(0,r.kt)("a",{parentName:"p",href:"https://docs.ethswarm.org/docs/access-the-swarm/keep-your-data-alive"},"Bee docs - Keep your data alive"),". "))),(0,r.kt)("h3",{id:"data"},"Data"),(0,r.kt)("p",null,"You can upload and retrieve any ",(0,r.kt)("inlineCode",{parentName:"p"},"string")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"Uint8Array")," data with ",(0,r.kt)("a",{parentName:"p",href:"/docs/api/classes/Bee#uploaddata"},(0,r.kt)("inlineCode",{parentName:"a"},"uploadData"))," and ",(0,r.kt)("a",{parentName:"p",href:"/docs/api/classes/Bee#downloaddata"},(0,r.kt)("inlineCode",{parentName:"a"},"downloadData"))," functions."),(0,r.kt)("p",null,"When you download data the return type is ",(0,r.kt)("a",{parentName:"p",href:"/docs/api/interfaces/Data"},(0,r.kt)("inlineCode",{parentName:"a"},"Data"))," interface which extends ",(0,r.kt)("inlineCode",{parentName:"p"},"Uint8Array")," with convenience functions like:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"text()")," that converts the bytes into UTF-8 encoded string"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"hex()")," that converts the bytes into ",(0,r.kt)("strong",{parentName:"li"},"non-prefixed")," hex string"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"json()")," that converts the bytes into JSON object")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const postageBatchId = await bee.createPostageBatch("100", 17)\nconst result = await bee.uploadData(postageBatchId, "Bee is awesome!")\n\n// prints Swarm hash of the file with which it can be retrieved\n// here it is fd79d5e0ebd8407e422f53ce1d7c4c41ebf403be55143900f8d1490560294780\nconsole.log(result.reference) \n\nconst retrievedData = await bee.downloadData(result.reference)\n\nconsole.log(retrievedData.text()) // prints \'Bee is awesome!\'\n')),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Tip")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Swarm reference or hash is a 64 characters long hex string which is the address of the uploaded data, file or directory."))),(0,r.kt)("h3",{id:"single-file"},"Single file"),(0,r.kt)("p",null,"You can also upload files and include a filename. When you download the file, ",(0,r.kt)("inlineCode",{parentName:"p"},"bee-js")," will return additional information like ",(0,r.kt)("inlineCode",{parentName:"p"},"contentType")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," of the file."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const postageBatchId = await bee.createPostageBatch(\"100\", 17)\nconst result = await bee.uploadFile(postageBatchId, \"Bee is awesome!\", \"textfile.txt\")\nconst retrievedFile = await bee.downloadFile(result.reference)\n\nconsole.log(retrievedFile.name) // prints 'textfile.txt'\nconsole.log(retrievedFile.contentType) // prints 'application/octet-stream'\nconsole.log(retrievedFile.data.text()) // prints 'Bee is awesome!'\n")),(0,r.kt)("p",null,"In browsers, you can upload directly ",(0,r.kt)("inlineCode",{parentName:"p"},"File")," type. The filename is taken from the file object itself, but can be overwritten through the second argument of the ",(0,r.kt)("inlineCode",{parentName:"p"},"uploadFile")," function (see the ",(0,r.kt)("a",{parentName:"p",href:"/docs/api/classes/Bee#uploadfile"},"API docs"),")"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const file = new File(["foo"], "foo.txt", { type: "text/plain" })\n\nconst postageBatchId = await bee.createPostageBatch("100", 17)\nconst result = await bee.uploadFile(postageBatchId, file)\nconst retrievedFile = await bee.downloadFile(result.reference)\n\nconsole.log(retrievedFile.name) // prints \'foo.txt\'\nconsole.log(retrievedFile.contentType) // prints \'text/plain\'\nconsole.log(retrievedFile.data.text()) // prints \'foo\'\n')),(0,r.kt)("h3",{id:"files-and-directories"},"Files and Directories"),(0,r.kt)("p",null,"The last supported mode is upload of files and directories. In browsers, you can easily upload an array of ",(0,r.kt)("inlineCode",{parentName:"p"},"File")," comming from your form directly as well as ",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/FileList"},(0,r.kt)("inlineCode",{parentName:"a"},"FileList")),". If the files uploaded through ",(0,r.kt)("inlineCode",{parentName:"p"},"uploadFiles")," have a relative path, they are added relative to this filepath. Otherwise, the whole structure is flattened into single directory."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const foo = new File(["foo"], "foo.txt", { type: "text/plain" })\nconst bar = new File(["bar"], "bar.txt", { type: "text/plain" })\n\nconst postageBatchId = await bee.createPostageBatch("100", 17)\nconst result = await bee.uploadFiles(postageBatchId, [ foo, bar ]) // upload\n\nconst rFoo = await bee.downloadFile(result.reference, \'./foo.txt\') // download foo\nconst rBar = await bee.downloadFile(result.reference, \'./bar.txt\') // download bar\n\nconsole.log(rFoo.data.text()) // prints \'foo\'\nconsole.log(rBar.data.text()) // prints \'bar\'\n')),(0,r.kt)("p",null,"In nodejs, you may utilise the ",(0,r.kt)("inlineCode",{parentName:"p"},"uploadFilesFromDirectory")," function, which takes directory path as input and upload all files in that directory. Lets assum we have following data structure:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},".\n+-- foo.txt\n+-- dir\n|   +-- bar.txt\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const postageBatchId = await bee.createPostageBatch(\"100\", 17)\n\nconst result = await bee.uploadFilesFromDirectory(postageBatchId, './') // upload recursively current folder\n\nconst rFoo = await bee.downloadFile(result.reference, './foo.txt') // download foo\nconst rBar = await bee.downloadFile(result.reference, './dir/bar.txt') // download bar\n\nconsole.log(rFoo.data.text()) // prints 'foo'\nconsole.log(rBar.data.text()) // prints 'bar'\n")),(0,r.kt)("h2",{id:"retrieve-file-from-node-or-gateway"},"Retrieve file from node or gateway"),(0,r.kt)("p",null,'You can always retrieve your files and data directly from the bee node through browser as well. For example, if you want to retrieve the "Bee is awesome!" text uploaded to Swarm in section ',(0,r.kt)("a",{parentName:"p",href:"#data"},"upload data"),", you can directly access it with: ",(0,r.kt)("a",{parentName:"p",href:"http://localhost:1633/files/fd79d5e0ebd8407e422f53ce1d7c4c41ebf403be55143900f8d1490560294780"},"http://localhost:1633/files/fd79d5...294780")),(0,r.kt)("p",null,"To share files with someone who isn't running a Bee node yet, simply change the host in the link to be one of our public gateways. Send the link to your friends, and they will be able to download the file too!"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://gateway.ethswarm.org/files/fd79d5e0ebd8407e422f53ce1d7c4c41ebf403be55143900f8d1490560294780"},"https://gateway.ethswarm.org/files/fd79d5...294780")))}p.isMDXComponent=!0}}]);